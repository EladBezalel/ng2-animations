"format register";System.register("angular2/src/router/directives/router_link_transform",["angular2/compiler","angular2/src/core/change_detection/parser/ast","angular2/src/facade/exceptions","angular2/core","angular2/src/core/change_detection/parser/parser"],!0,function(require,e,t){function r(e,t){var r=new y(e,t.trim()).tokenize();return new v(r).generate()}var n=System.global,i=n.define;n.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},c=require("angular2/compiler"),u=require("angular2/src/core/change_detection/parser/ast"),l=require("angular2/src/facade/exceptions"),p=require("angular2/core"),f=require("angular2/src/core/change_detection/parser/parser"),d=function(){function e(e){this.value=e}return e}(),h=function(){function e(){}return e}(),g=function(){function e(){}return e}(),m=function(){function e(e){this.ast=e}return e}(),y=function(){function e(e,t){this.parser=e,this.exp=t,this.index=0}return e.prototype.tokenize=function(){for(var e=[];this.index<this.exp.length;)e.push(this._parseToken());return e},e.prototype._parseToken=function(){var e=this.exp[this.index];return"["==e?(this.index++,new h):"]"==e?(this.index++,new g):"("==e?this._parseParams():"/"==e&&0!==this.index?(this.index++,this._parseFixedPart()):this._parseFixedPart()},e.prototype._parseParams=function(){for(var e=this.index;this.index<this.exp.length;++this.index){var t=this.exp[this.index];if(")"==t){var r=this.exp.substring(e+1,this.index);return this.index++,new m(this.parser.parseBinding("{"+r+"}",null).ast)}}throw new l.BaseException("Cannot find ')'")},e.prototype._parseFixedPart=function(){for(var e=this.index,t=!1;this.index<this.exp.length;++this.index){var r=this.exp[this.index];if("("==r||"["==r||"]"==r||"/"==r&&t)break;"."!=r&&"/"!=r&&(t=!0)}var n=this.exp.substring(e,this.index);if(e===this.index||!t||n.startsWith("//"))throw new l.BaseException("Invalid router link");return new d(n)},e}(),v=function(){function e(e){this.tokens=e,this.index=0}return e.prototype.generate=function(){return this._genAuxiliary()},e.prototype._genAuxiliary=function(){for(var e=[];this.index<this.tokens.length;this.index++){var t=this.tokens[this.index];if(t instanceof d)e.push(new u.LiteralPrimitive(t.value));else if(t instanceof m)e.push(t.ast);else{if(t instanceof g)break;t instanceof h&&(this.index++,e.push(this._genAuxiliary()))}}return new u.LiteralArray(e)},e}(),_=function(e){function t(t){e.call(this),this.parser=t}return o(t,e),t.prototype.visitQuote=function(t){return"route"==t.prefix?r(this.parser,t.uninterpretedExpression):e.prototype.visitQuote.call(this,t)},t}(u.AstTransformer);e.parseRouterLinkExpression=r;var b=function(){function e(e){this.astTransformer=new _(e)}return e.prototype.visitNgContent=function(e,t){return e},e.prototype.visitEmbeddedTemplate=function(e,t){return e},e.prototype.visitElement=function(e,t){var r=this,n=e.children.map(function(e){return e.visit(r,t)}),i=e.inputs.map(function(e){return e.visit(r,t)}),o=e.directives.map(function(e){return e.visit(r,t)});return new c.ElementAst(e.name,e.attrs,i,e.outputs,e.exportAsVars,o,n,e.ngContentIndex,e.sourceSpan)},e.prototype.visitVariable=function(e,t){return e},e.prototype.visitEvent=function(e,t){return e},e.prototype.visitElementProperty=function(e,t){return e},e.prototype.visitAttr=function(e,t){return e},e.prototype.visitBoundText=function(e,t){return e},e.prototype.visitText=function(e,t){return e},e.prototype.visitDirective=function(e,t){var r=this,n=e.inputs.map(function(e){return e.visit(r,t)});return new c.DirectiveAst(e.directive,n,e.hostProperties,e.hostEvents,e.exportAsVars,e.sourceSpan)},e.prototype.visitDirectiveProperty=function(e,t){var r=e.value.visit(this.astTransformer);return new c.BoundDirectivePropertyAst(e.directiveName,e.templateName,r,e.sourceSpan)},e=a([p.Injectable(),s("design:paramtypes",[f.Parser])],e)}();return e.RouterLinkTransform=b,n.define=i,t.exports}),System.register("angular2/router/router_link_dsl",["angular2/compiler","angular2/core","angular2/src/router/directives/router_link_transform","angular2/src/facade/lang","angular2/src/router/directives/router_link_transform"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/compiler"),o=require("angular2/core"),a=require("angular2/src/router/directives/router_link_transform"),s=require("angular2/src/facade/lang"),c=require("angular2/src/router/directives/router_link_transform");return e.RouterLinkTransform=c.RouterLinkTransform,e.ROUTER_LINK_DSL_PROVIDER=s.CONST_EXPR(new o.Provider(i.TEMPLATE_TRANSFORMS,{useClass:a.RouterLinkTransform,multi:!0})),r.define=n,t.exports}),System.register("angular2/src/router/route_config/route_config_impl",["angular2/src/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/src/facade/lang"),c=function(){function e(e){this.configs=e}return e=o([s.CONST(),a("design:paramtypes",[Array])],e)}();e.RouteConfig=c;var u=function(){function e(e){var t=e.name,r=e.useAsDefault,n=e.path,i=e.regex,o=e.serializer,a=e.data;this.name=t,this.useAsDefault=r,this.path=n,this.regex=i,this.serializer=o,this.data=a}return e=o([s.CONST(),a("design:paramtypes",[Object])],e)}();e.AbstractRoute=u;var l=function(e){function t(t){var r=t.name,n=t.useAsDefault,i=t.path,o=t.regex,a=t.serializer,s=t.data,c=t.component;e.call(this,{name:r,useAsDefault:n,path:i,regex:o,serializer:a,data:s}),this.aux=null,this.component=c}return i(t,e),t=o([s.CONST(),a("design:paramtypes",[Object])],t)}(u);e.Route=l;var p=function(e){function t(t){var r=t.name,n=t.useAsDefault,i=t.path,o=t.regex,a=t.serializer,s=t.data,c=t.component;e.call(this,{name:r,useAsDefault:n,path:i,regex:o,serializer:a,data:s}),this.component=c}return i(t,e),t=o([s.CONST(),a("design:paramtypes",[Object])],t)}(u);e.AuxRoute=p;var f=function(e){function t(t){var r=t.name,n=t.useAsDefault,i=t.path,o=t.regex,a=t.serializer,s=t.data,c=t.loader;e.call(this,{name:r,useAsDefault:n,path:i,regex:o,serializer:a,data:s}),this.aux=null,this.loader=c}return i(t,e),t=o([s.CONST(),a("design:paramtypes",[Object])],t)}(u);e.AsyncRoute=f;var d=function(e){function t(t){var r=t.name,n=t.useAsDefault,i=t.path,o=t.regex,a=t.serializer,s=t.data,c=t.redirectTo;e.call(this,{name:r,useAsDefault:n,path:i,regex:o,serializer:a,data:s}),this.redirectTo=c}return i(t,e),t=o([s.CONST(),a("design:paramtypes",[Object])],t)}(u);return e.Redirect=d,r.define=n,t.exports}),System.register("angular2/src/router/url_parser",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(e){var t=[];return l.isBlank(e)?[]:(u.StringMapWrapper.forEach(e,function(e,r){t.push(e===!0?r:r+"="+e)}),t)}function n(e,t){return void 0===t&&(t="&"),r(e).join(t)}function i(e){for(var t=new f(e[e.length-1]),r=e.length-2;r>=0;r-=1)t=new f(e[r],t);return t}function o(e){var t=l.RegExpWrapper.firstMatch(h,e);return l.isPresent(t)?t[0]:""}var a=System.global,s=a.define;a.define=void 0;var c=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},u=require("angular2/src/facade/collection"),l=require("angular2/src/facade/lang"),p=require("angular2/src/facade/exceptions");e.convertUrlParamsToArray=r,e.serializeParams=n;var f=function(){function e(e,t,r,n){void 0===t&&(t=null),void 0===r&&(r=l.CONST_EXPR([])),void 0===n&&(n=l.CONST_EXPR({})),this.path=e,this.child=t,this.auxiliary=r,this.params=n}return e.prototype.toString=function(){return this.path+this._matrixParamsToString()+this._auxToString()+this._childString()},e.prototype.segmentToString=function(){return this.path+this._matrixParamsToString()},e.prototype._auxToString=function(){return this.auxiliary.length>0?"("+this.auxiliary.map(function(e){return e.toString()}).join("//")+")":""},e.prototype._matrixParamsToString=function(){var e=n(this.params,";");return e.length>0?";"+e:""},e.prototype._childString=function(){return l.isPresent(this.child)?"/"+this.child.toString():""},e}();e.Url=f;var d=function(e){function t(t,r,n,i){void 0===r&&(r=null),void 0===n&&(n=l.CONST_EXPR([])),void 0===i&&(i=null),e.call(this,t,r,n,i)}return c(t,e),t.prototype.toString=function(){return this.path+this._auxToString()+this._childString()+this._queryParamsToString()},t.prototype.segmentToString=function(){return this.path+this._queryParamsToString()},t.prototype._queryParamsToString=function(){return l.isBlank(this.params)?"":"?"+n(this.params)},t}(f);e.RootUrl=d,e.pathSegmentsToUrl=i;var h=l.RegExpWrapper.create("^[^\\/\\(\\)\\?;=&#]+"),g=function(){function e(){}return e.prototype.peekStartsWith=function(e){return this._remaining.startsWith(e)},e.prototype.capture=function(e){if(!this._remaining.startsWith(e))throw new p.BaseException('Expected "'+e+'".');this._remaining=this._remaining.substring(e.length)},e.prototype.parse=function(e){return this._remaining=e,""==e||"/"==e?new f(""):this.parseRoot()},e.prototype.parseRoot=function(){this.peekStartsWith("/")&&this.capture("/");var e=o(this._remaining);this.capture(e);var t=[];this.peekStartsWith("(")&&(t=this.parseAuxiliaryRoutes()),this.peekStartsWith(";")&&this.parseMatrixParams();var r=null;this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),r=this.parseSegment());var n=null;return this.peekStartsWith("?")&&(n=this.parseQueryParams()),new d(e,r,t,n)},e.prototype.parseSegment=function(){if(0==this._remaining.length)return null;this.peekStartsWith("/")&&this.capture("/");var e=o(this._remaining);this.capture(e);var t=null;this.peekStartsWith(";")&&(t=this.parseMatrixParams());var r=[];this.peekStartsWith("(")&&(r=this.parseAuxiliaryRoutes());var n=null;return this.peekStartsWith("/")&&!this.peekStartsWith("//")&&(this.capture("/"),n=this.parseSegment()),new f(e,n,r,t)},e.prototype.parseQueryParams=function(){var e={};for(this.capture("?"),this.parseParam(e);this._remaining.length>0&&this.peekStartsWith("&");)this.capture("&"),this.parseParam(e);return e},e.prototype.parseMatrixParams=function(){for(var e={};this._remaining.length>0&&this.peekStartsWith(";");)this.capture(";"),this.parseParam(e);return e},e.prototype.parseParam=function(e){var t=o(this._remaining);if(!l.isBlank(t)){this.capture(t);var r=!0;if(this.peekStartsWith("=")){this.capture("=");var n=o(this._remaining);l.isPresent(n)&&(r=n,this.capture(r))}e[t]=r}},e.prototype.parseAuxiliaryRoutes=function(){var e=[];for(this.capture("(");!this.peekStartsWith(")")&&this._remaining.length>0;)e.push(this.parseSegment()),this.peekStartsWith("//")&&this.capture("//");return this.capture(")"),e},e}();return e.UrlParser=g,e.parser=new g,a.define=s,t.exports}),System.register("angular2/src/router/instruction",["angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/async"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("angular2/src/facade/collection"),a=require("angular2/src/facade/lang"),s=require("angular2/src/facade/async"),c=function(){function e(e){this.params=e}return e.prototype.get=function(e){return a.normalizeBlank(o.StringMapWrapper.get(this.params,e))},e}();e.RouteParams=c;var u=function(){function e(e){void 0===e&&(e=a.CONST_EXPR({})),this.data=e}return e.prototype.get=function(e){return a.normalizeBlank(o.StringMapWrapper.get(this.data,e))},e}();e.RouteData=u,e.BLANK_ROUTE_DATA=new u;var l=function(){function e(e,t,r){this.component=e,this.child=t,this.auxInstruction=r}return Object.defineProperty(e.prototype,"urlPath",{get:function(){return a.isPresent(this.component)?this.component.urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlParams",{get:function(){return a.isPresent(this.component)?this.component.urlParams:[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specificity",{get:function(){var e="";return a.isPresent(this.component)&&(e+=this.component.specificity),a.isPresent(this.child)&&(e+=this.child.specificity),e},enumerable:!0,configurable:!0}),e.prototype.toRootUrl=function(){return this.toUrlPath()+this.toUrlQuery()},e.prototype._toNonRootUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(a.isPresent(this.child)?this.child._toNonRootUrl():"")},e.prototype.toUrlQuery=function(){return this.urlParams.length>0?"?"+this.urlParams.join("&"):""},e.prototype.replaceChild=function(e){return new p(this.component,e,this.auxInstruction)},e.prototype.toUrlPath=function(){return this.urlPath+this._stringifyAux()+(a.isPresent(this.child)?this.child._toNonRootUrl():"")},e.prototype.toLinkUrl=function(){return this.urlPath+this._stringifyAux()+(a.isPresent(this.child)?this.child._toLinkUrl():"")},e.prototype._toLinkUrl=function(){return this._stringifyPathMatrixAuxPrefixed()+(a.isPresent(this.child)?this.child._toLinkUrl():"")},e.prototype._stringifyPathMatrixAuxPrefixed=function(){var e=this._stringifyPathMatrixAux();return e.length>0&&(e="/"+e),e},e.prototype._stringifyMatrixParams=function(){return this.urlParams.length>0?";"+this.urlParams.join(";"):""},e.prototype._stringifyPathMatrixAux=function(){return a.isBlank(this.component)?"":this.urlPath+this._stringifyMatrixParams()+this._stringifyAux()},e.prototype._stringifyAux=function(){var e=[];return o.StringMapWrapper.forEach(this.auxInstruction,function(t,r){e.push(t._stringifyPathMatrixAux())}),e.length>0?"("+e.join("//")+")":""},e}();e.Instruction=l;var p=function(e){function t(t,r,n){e.call(this,t,r,n)}return i(t,e),t.prototype.resolveComponent=function(){return s.PromiseWrapper.resolve(this.component)},t}(l);e.ResolvedInstruction=p;var f=function(e){function t(t,r){e.call(this,t,r,{})}return i(t,e),t.prototype.toLinkUrl=function(){return""},t.prototype._toLinkUrl=function(){return""},t}(p);e.DefaultInstruction=f;var d=function(e){function t(t,r,n){void 0===r&&(r=""),void 0===n&&(n=a.CONST_EXPR([])),e.call(this,null,null,{}),this._resolver=t,this._urlPath=r,this._urlParams=n}return i(t,e),Object.defineProperty(t.prototype,"urlPath",{get:function(){return a.isPresent(this.component)?this.component.urlPath:a.isPresent(this._urlPath)?this._urlPath:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"urlParams",{get:function(){return a.isPresent(this.component)?this.component.urlParams:a.isPresent(this._urlParams)?this._urlParams:[]},enumerable:!0,configurable:!0}),t.prototype.resolveComponent=function(){var e=this;return a.isPresent(this.component)?s.PromiseWrapper.resolve(this.component):this._resolver().then(function(t){return e.child=t.child,e.component=t.component})},t}(l);e.UnresolvedInstruction=d;var h=function(e){function t(t,r,n,i){e.call(this,t,r,n),this._specificity=i}return i(t,e),Object.defineProperty(t.prototype,"specificity",{get:function(){return this._specificity},enumerable:!0,configurable:!0}),t}(p);e.RedirectInstruction=h;var g=function(){function t(t,r,n,i,o,s,c){void 0===c&&(c=null),this.urlPath=t,this.urlParams=r,this.componentType=i,this.terminal=o,this.specificity=s,this.params=c,this.reuse=!1,this.routeData=a.isPresent(n)?n:e.BLANK_ROUTE_DATA}return t}();return e.ComponentInstruction=g,r.define=n,t.exports}),System.register("angular2/src/router/rules/route_handlers/async_route_handler",["angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/router/instruction"),a=function(){function e(e,t){void 0===t&&(t=null),this._loader=e,this._resolvedComponent=null,this.data=i.isPresent(t)?new o.RouteData(t):o.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){var e=this;return i.isPresent(this._resolvedComponent)?this._resolvedComponent:this._resolvedComponent=this._loader().then(function(t){return e.componentType=t,t})},e}();return e.AsyncRouteHandler=a,r.define=n,t.exports}),System.register("angular2/src/router/rules/route_handlers/sync_route_handler",["angular2/src/facade/async","angular2/src/facade/lang","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/async"),o=require("angular2/src/facade/lang"),a=require("angular2/src/router/instruction"),s=function(){function e(e,t){this.componentType=e,this._resolvedComponent=null,this._resolvedComponent=i.PromiseWrapper.resolve(e),this.data=o.isPresent(t)?new a.RouteData(t):a.BLANK_ROUTE_DATA}return e.prototype.resolveComponentType=function(){return this._resolvedComponent},e}();return e.SyncRouteHandler=s,r.define=n,t.exports}),System.register("angular2/src/router/utils",["angular2/src/facade/lang","angular2/src/facade/collection"],!0,function(require,e,t){function r(e){return o.isBlank(e)?null:e.toString()}var n=System.global,i=n.define;n.define=void 0;var o=require("angular2/src/facade/lang"),a=require("angular2/src/facade/collection"),s=function(){function e(e){var t=this;this.map={},this.keys={},o.isPresent(e)&&a.StringMapWrapper.forEach(e,function(e,r){t.map[r]=o.isPresent(e)?e.toString():null,t.keys[r]=!0})}return e.prototype.get=function(e){return a.StringMapWrapper["delete"](this.keys,e),this.map[e]},e.prototype.getUnused=function(){var e=this,t={},r=a.StringMapWrapper.keys(this.keys);return r.forEach(function(r){return t[r]=a.StringMapWrapper.get(e.map,r)}),t},e}();return e.TouchMap=s,e.normalizeString=r,n.define=i,t.exports}),System.register("angular2/src/router/rules/route_paths/route_path",[],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=function(){function e(e,t,r,n,i){this.urlPath=e,this.urlParams=t,this.allParams=r,this.auxiliary=n,this.rest=i}return e}();e.MatchedUrl=i;var o=function(){function e(e,t){this.urlPath=e,this.urlParams=t}return e}();return e.GeneratedUrl=o,r.define=n,t.exports}),System.register("angular2/src/router/rules/route_paths/regex_route_path",["angular2/src/facade/lang","angular2/src/router/rules/route_paths/route_path"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/router/rules/route_paths/route_path"),a=function(){function e(e,t){this._reString=e,this._serializer=t,this.terminal=!0,this.specificity="2",this.hash=this._reString,this._regex=i.RegExpWrapper.create(this._reString)}return e.prototype.matchUrl=function(e){var t=e.toString(),r={},n=i.RegExpWrapper.matcher(this._regex,t),a=i.RegExpMatcherWrapper.next(n);if(i.isBlank(a))return null;for(var s=0;s<a.length;s+=1)r[s.toString()]=a[s];return new o.MatchedUrl(t,[],r,[],null)},e.prototype.generateUrl=function(e){return this._serializer(e)},e.prototype.toString=function(){return this._reString},e}();return e.RegexRoutePath=a,r.define=n,t.exports}),System.register("angular2/src/router/route_config/route_config_decorator",["angular2/src/router/route_config/route_config_impl","angular2/src/core/util/decorators","angular2/src/router/route_config/route_config_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/router/route_config/route_config_impl"),o=require("angular2/src/core/util/decorators"),a=require("angular2/src/router/route_config/route_config_impl");return e.Route=a.Route,e.Redirect=a.Redirect,e.AuxRoute=a.AuxRoute,e.AsyncRoute=a.AsyncRoute,e.RouteConfig=o.makeDecorator(i.RouteConfig),r.define=n,t.exports}),System.register("angular2/src/router/location/location_strategy",["angular2/src/facade/lang","angular2/core"],!0,function(require,e,t){function r(e){return e.length>0&&"?"!=e.substring(0,1)?"?"+e:e}function n(e,t){if(0==e.length)return t;if(0==t.length)return e;var r=0;return e.endsWith("/")&&r++,t.startsWith("/")&&r++,2==r?e+t.substring(1):1==r?e+t:e+"/"+t}var i=System.global,o=i.define;i.define=void 0;var a=require("angular2/src/facade/lang"),s=require("angular2/core"),c=function(){function e(){}return e}();return e.LocationStrategy=c,e.APP_BASE_HREF=a.CONST_EXPR(new s.OpaqueToken("appBaseHref")),e.normalizeQueryParams=r,e.joinWithSlash=n,i.define=o,t.exports}),System.register("angular2/src/router/lifecycle/lifecycle_annotations_impl",["angular2/src/facade/lang"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/src/facade/lang"),s=function(){function e(e){this.name=e}return e=i([a.CONST(),o("design:paramtypes",[String])],e)}();e.RouteLifecycleHook=s;var c=function(){function e(e){this.fn=e}return e=i([a.CONST(),o("design:paramtypes",[Function])],e)}();return e.CanActivate=c,e.routerCanReuse=a.CONST_EXPR(new s("routerCanReuse")),e.routerCanDeactivate=a.CONST_EXPR(new s("routerCanDeactivate")),e.routerOnActivate=a.CONST_EXPR(new s("routerOnActivate")),e.routerOnReuse=a.CONST_EXPR(new s("routerOnReuse")),e.routerOnDeactivate=a.CONST_EXPR(new s("routerOnDeactivate")),r.define=n,t.exports}),System.register("angular2/src/router/lifecycle/lifecycle_annotations",["angular2/src/core/util/decorators","angular2/src/router/lifecycle/lifecycle_annotations_impl","angular2/src/router/lifecycle/lifecycle_annotations_impl"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/core/util/decorators"),o=require("angular2/src/router/lifecycle/lifecycle_annotations_impl"),a=require("angular2/src/router/lifecycle/lifecycle_annotations_impl");return e.routerCanReuse=a.routerCanReuse,e.routerCanDeactivate=a.routerCanDeactivate,e.routerOnActivate=a.routerOnActivate,e.routerOnReuse=a.routerOnReuse,e.routerOnDeactivate=a.routerOnDeactivate,e.CanActivate=i.makeDecorator(o.CanActivate),r.define=n,t.exports}),System.register("angular2/src/router/directives/router_link",["angular2/core","angular2/src/facade/lang","angular2/src/router/router","angular2/src/router/location/location"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=require("angular2/core"),s=require("angular2/src/facade/lang"),c=require("angular2/src/router/router"),u=require("angular2/src/router/location/location"),l=function(){function e(e,t){var r=this;this._router=e,this._location=t,this._router.subscribe(function(e){return r._updateLink()})}return e.prototype._updateLink=function(){this._navigationInstruction=this._router.generate(this._routeParams);var e=this._navigationInstruction.toLinkUrl();this.visibleHref=this._location.prepareExternalUrl(e)},Object.defineProperty(e.prototype,"isRouteActive",{get:function(){return this._router.isRouteActive(this._navigationInstruction)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeParams",{set:function(e){this._routeParams=e,this._updateLink()},enumerable:!0,configurable:!0}),e.prototype.onClick=function(){return s.isString(this.target)&&"_self"!=this.target?!0:(this._router.navigateByInstruction(this._navigationInstruction),!1)},e=i([a.Directive({selector:"[routerLink]",inputs:["routeParams: routerLink","target: target"],host:{"(click)":"onClick()","[attr.href]":"visibleHref","[class.router-link-active]":"isRouteActive"}}),o("design:paramtypes",[c.Router,u.Location])],e)}();return e.RouterLink=l,r.define=n,t.exports}),System.register("angular2/src/router/location/platform_location",[],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=function(){function e(){}return e}();return e.PlatformLocation=i,r.define=n,t.exports}),System.register("angular2/src/router/location/hash_location_strategy",["angular2/core","angular2/src/router/location/location_strategy","angular2/src/facade/lang","angular2/src/router/location/platform_location"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},c=require("angular2/core"),u=require("angular2/src/router/location/location_strategy"),l=require("angular2/src/facade/lang"),p=require("angular2/src/router/location/platform_location"),f=function(e){function t(t,r){e.call(this),this._platformLocation=t,this._baseHref="",l.isPresent(r)&&(this._baseHref=r)}return i(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.path=function(){var e=this._platformLocation.hash;return l.isPresent(e)||(e="#"),e.length>0?e.substring(1):e},t.prototype.prepareExternalUrl=function(e){var t=u.joinWithSlash(this._baseHref,e);return t.length>0?"#"+t:t},t.prototype.pushState=function(e,t,r,n){var i=this.prepareExternalUrl(r+u.normalizeQueryParams(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)},t.prototype.replaceState=function(e,t,r,n){var i=this.prepareExternalUrl(r+u.normalizeQueryParams(n));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t=o([c.Injectable(),s(1,c.Optional()),s(1,c.Inject(u.APP_BASE_HREF)),a("design:paramtypes",[p.PlatformLocation,String])],t)}(u.LocationStrategy);return e.HashLocationStrategy=f,r.define=n,t.exports}),System.register("angular2/src/router/location/path_location_strategy",["angular2/core","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/router/location/location_strategy","angular2/src/router/location/platform_location"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},c=require("angular2/core"),u=require("angular2/src/facade/lang"),l=require("angular2/src/facade/exceptions"),p=require("angular2/src/router/location/location_strategy"),f=require("angular2/src/router/location/platform_location"),d=function(e){function t(t,r){if(e.call(this),this._platformLocation=t,u.isBlank(r)&&(r=this._platformLocation.getBaseHrefFromDOM()),u.isBlank(r))throw new l.BaseException("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}return i(t,e),t.prototype.onPopState=function(e){this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e)},t.prototype.getBaseHref=function(){return this._baseHref},t.prototype.prepareExternalUrl=function(e){return p.joinWithSlash(this._baseHref,e)},t.prototype.path=function(){return this._platformLocation.pathname+p.normalizeQueryParams(this._platformLocation.search)},t.prototype.pushState=function(e,t,r,n){var i=this.prepareExternalUrl(r+p.normalizeQueryParams(n));this._platformLocation.pushState(e,t,i)},t.prototype.replaceState=function(e,t,r,n){var i=this.prepareExternalUrl(r+p.normalizeQueryParams(n));this._platformLocation.replaceState(e,t,i)},t.prototype.forward=function(){this._platformLocation.forward()},t.prototype.back=function(){this._platformLocation.back()},t=o([c.Injectable(),s(1,c.Optional()),s(1,c.Inject(p.APP_BASE_HREF)),a("design:paramtypes",[f.PlatformLocation,String])],t)}(p.LocationStrategy);return e.PathLocationStrategy=d,r.define=n,t.exports}),System.register("angular2/src/router/route_definition",[],!0,function(require,e,t){var r=System.global,n=r.define;return r.define=void 0,r.define=n,t.exports}),System.register("angular2/src/router/router_providers_common",["angular2/src/router/location/location_strategy","angular2/src/router/location/path_location_strategy","angular2/src/router/router","angular2/src/router/route_registry","angular2/src/router/location/location","angular2/src/facade/lang","angular2/core","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(e,t,r,n){var i=new c.RootRouter(e,t,r);return n.registerDisposeListener(function(){return i.dispose()}),i}function n(e){if(0==e.componentTypes.length)throw new d.BaseException("Bootstrap at least one component before injecting Router.");return e.componentTypes[0]}var i=System.global,o=i.define;i.define=void 0;var a=require("angular2/src/router/location/location_strategy"),s=require("angular2/src/router/location/path_location_strategy"),c=require("angular2/src/router/router"),u=require("angular2/src/router/route_registry"),l=require("angular2/src/router/location/location"),p=require("angular2/src/facade/lang"),f=require("angular2/core"),d=require("angular2/src/facade/exceptions");
return e.ROUTER_PROVIDERS_COMMON=p.CONST_EXPR([u.RouteRegistry,p.CONST_EXPR(new f.Provider(a.LocationStrategy,{useClass:s.PathLocationStrategy})),l.Location,p.CONST_EXPR(new f.Provider(c.Router,{useFactory:r,deps:p.CONST_EXPR([u.RouteRegistry,l.Location,u.ROUTER_PRIMARY_COMPONENT,f.ApplicationRef])})),p.CONST_EXPR(new f.Provider(u.ROUTER_PRIMARY_COMPONENT,{useFactory:n,deps:p.CONST_EXPR([f.ApplicationRef])}))]),i.define=o,t.exports}),System.register("angular2/src/router/rules/rules",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/promise","angular2/src/facade/collection","angular2/src/router/url_parser","angular2/src/router/instruction"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=require("angular2/src/facade/lang"),a=require("angular2/src/facade/exceptions"),s=require("angular2/src/facade/promise"),c=require("angular2/src/facade/collection"),u=require("angular2/src/router/url_parser"),l=require("angular2/src/router/instruction"),p=function(){function e(){}return e}();e.RouteMatch=p;var f=function(e){function t(t,r,n){e.call(this),this.instruction=t,this.remaining=r,this.remainingAux=n}return i(t,e),t}(p);e.PathMatch=f;var d=function(e){function t(t,r){e.call(this),this.redirectTo=t,this.specificity=r}return i(t,e),t}(p);e.RedirectMatch=d;var h=function(){function e(e,t){this._pathRecognizer=e,this.redirectTo=t,this.hash=this._pathRecognizer.hash}return Object.defineProperty(e.prototype,"path",{get:function(){return this._pathRecognizer.toString()},set:function(e){throw new a.BaseException("you cannot set the path of a RedirectRule directly")},enumerable:!0,configurable:!0}),e.prototype.recognize=function(e){var t=null;return o.isPresent(this._pathRecognizer.matchUrl(e))&&(t=new d(this.redirectTo,this._pathRecognizer.specificity)),s.PromiseWrapper.resolve(t)},e.prototype.generate=function(e){throw new a.BaseException("Tried to generate a redirect.")},e}();e.RedirectRule=h;var g=function(){function e(e,t){this._routePath=e,this.handler=t,this._cache=new c.Map,this.specificity=this._routePath.specificity,this.hash=this._routePath.hash,this.terminal=this._routePath.terminal}return Object.defineProperty(e.prototype,"path",{get:function(){return this._routePath.toString()},set:function(e){throw new a.BaseException("you cannot set the path of a RouteRule directly")},enumerable:!0,configurable:!0}),e.prototype.recognize=function(e){var t=this,r=this._routePath.matchUrl(e);return o.isBlank(r)?null:this.handler.resolveComponentType().then(function(e){var n=t._getInstruction(r.urlPath,r.urlParams,r.allParams);return new f(n,r.rest,r.auxiliary)})},e.prototype.generate=function(e){var t=this._routePath.generateUrl(e),r=t.urlPath,n=t.urlParams;return this._getInstruction(r,u.convertUrlParamsToArray(n),e)},e.prototype.generateComponentPathValues=function(e){return this._routePath.generateUrl(e)},e.prototype._getInstruction=function(e,t,r){if(o.isBlank(this.handler.componentType))throw new a.BaseException("Tried to get instruction before the type was loaded.");var n=e+"?"+t.join("&");if(this._cache.has(n))return this._cache.get(n);var i=new l.ComponentInstruction(e,t,this.handler.data,this.handler.componentType,this.terminal,this.specificity,r);return this._cache.set(n,i),i},e}();return e.RouteRule=g,r.define=n,t.exports}),System.register("angular2/src/router/rules/route_paths/param_route_path",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/router/utils","angular2/src/router/url_parser","angular2/src/router/rules/route_paths/route_path"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/facade/exceptions"),a=require("angular2/src/facade/collection"),s=require("angular2/src/router/utils"),c=require("angular2/src/router/url_parser"),u=require("angular2/src/router/rules/route_paths/route_path"),l=function(){function e(){this.name="",this.specificity="",this.hash="..."}return e.prototype.generate=function(e){return""},e.prototype.match=function(e){return!0},e}(),p=function(){function e(e){this.path=e,this.name="",this.specificity="2",this.hash=e}return e.prototype.match=function(e){return e==this.path},e.prototype.generate=function(e){return this.path},e}(),f=function(){function e(e){this.name=e,this.specificity="1",this.hash=":"}return e.prototype.match=function(e){return e.length>0},e.prototype.generate=function(e){if(!a.StringMapWrapper.contains(e.map,this.name))throw new o.BaseException("Route generator for '"+this.name+"' was not included in parameters passed.");return s.normalizeString(e.get(this.name))},e.paramMatcher=/^:([^\/]+)$/g,e}(),d=function(){function e(e){this.name=e,this.specificity="0",this.hash="*"}return e.prototype.match=function(e){return!0},e.prototype.generate=function(e){return s.normalizeString(e.get(this.name))},e.wildcardMatcher=/^\*([^\/]+)$/g,e}(),h=function(){function e(e){this.routePath=e,this.terminal=!0,this._assertValidPath(e),this._parsePathString(e),this.specificity=this._calculateSpecificity(),this.hash=this._calculateHash();var t=this._segments[this._segments.length-1];this.terminal=!(t instanceof l)}return e.prototype.matchUrl=function(e){for(var t,r=e,n={},o=[],s=0;s<this._segments.length;s+=1){var p=this._segments[s];if(t=r,p instanceof l)break;if(i.isPresent(t)){if(p instanceof d){n[p.name]=t.toString(),o.push(t.toString()),r=null;break}if(o.push(t.path),p instanceof f)n[p.name]=t.path;else if(!p.match(t.path))return null;r=t.child}else if(!p.match(""))return null}if(this.terminal&&i.isPresent(r))return null;var h=o.join("/"),g=[],m=[],y=n;if(i.isPresent(t)){var v=e instanceof c.RootUrl?e:t;i.isPresent(v.params)?(y=a.StringMapWrapper.merge(v.params,n),m=c.convertUrlParamsToArray(v.params)):y=n,g=t.auxiliary}return new u.MatchedUrl(h,m,y,g,r)},e.prototype.generateUrl=function(e){for(var t=new s.TouchMap(e),r=[],n=0;n<this._segments.length;n++){var i=this._segments[n];i instanceof l||r.push(i.generate(t))}var o=r.join("/"),a=t.getUnused(),c=a;return new u.GeneratedUrl(o,c)},e.prototype.toString=function(){return this.routePath},e.prototype._parsePathString=function(e){e.startsWith("/")&&(e=e.substring(1));var t=e.split("/");this._segments=[];for(var r=t.length-1,n=0;r>=n;n++){var a,s=t[n];if(i.isPresent(a=i.RegExpWrapper.firstMatch(f.paramMatcher,s)))this._segments.push(new f(a[1]));else if(i.isPresent(a=i.RegExpWrapper.firstMatch(d.wildcardMatcher,s)))this._segments.push(new d(a[1]));else if("..."==s){if(r>n)throw new o.BaseException('Unexpected "..." before the end of the path for "'+e+'".');this._segments.push(new l)}else this._segments.push(new p(s))}},e.prototype._calculateSpecificity=function(){var e,t,r=this._segments.length;if(0==r)t+="2";else for(t="",e=0;r>e;e++)t+=this._segments[e].specificity;return t},e.prototype._calculateHash=function(){var e,t=this._segments.length,r=[];for(e=0;t>e;e++)r.push(this._segments[e].hash);return r.join("/")},e.prototype._assertValidPath=function(t){if(i.StringWrapper.contains(t,"#"))throw new o.BaseException('Path "'+t+'" should not include "#". Use "HashLocationStrategy" instead.');var r=i.RegExpWrapper.firstMatch(e.RESERVED_CHARS,t);if(i.isPresent(r))throw new o.BaseException('Path "'+t+'" contains "'+r[0]+'" which is not allowed in a route config.')},e.RESERVED_CHARS=i.RegExpWrapper.create("//|\\(|\\)|;|\\?|="),e}();return e.ParamRoutePath=h,r.define=n,t.exports}),System.register("angular2/src/router/route_config/route_config_normalizer",["angular2/src/router/route_config/route_config_decorator","angular2/src/facade/lang","angular2/src/facade/exceptions"],!0,function(require,e,t){function r(e,t){if(e instanceof s.AsyncRoute){var r=n(e.loader,t);return new s.AsyncRoute({path:e.path,loader:r,name:e.name,data:e.data,useAsDefault:e.useAsDefault})}if(e instanceof s.Route||e instanceof s.Redirect||e instanceof s.AuxRoute)return e;if(+!!e.component+ +!!e.redirectTo+ +!!e.loader!=1)throw new u.BaseException('Route config should contain exactly one "component", "loader", or "redirectTo" property.');if(e.as&&e.name)throw new u.BaseException('Route config should contain exactly one "as" or "name" property.');if(e.as&&(e.name=e.as),e.loader){var r=n(e.loader,t);return new s.AsyncRoute({path:e.path,loader:r,name:e.name,data:e.data,useAsDefault:e.useAsDefault})}if(e.aux)return new s.AuxRoute({path:e.aux,component:e.component,name:e.name});if(e.component){if("object"==typeof e.component){var i=e.component;if("constructor"==i.type)return new s.Route({path:e.path,component:i.constructor,name:e.name,data:e.data,useAsDefault:e.useAsDefault});if("loader"==i.type)return new s.AsyncRoute({path:e.path,loader:i.loader,name:e.name,data:e.data,useAsDefault:e.useAsDefault});throw new u.BaseException('Invalid component type "'+i.type+'". Valid types are "constructor" and "loader".')}return new s.Route(e)}return e.redirectTo?new s.Redirect({path:e.path,redirectTo:e.redirectTo}):e}function n(e,t){return function(){return e().then(function(e){return t.configFromComponent(e),e})}}function i(e,t){if(!c.isType(e))throw new u.BaseException('Component for route "'+t+'" is not defined, or is not a class.')}var o=System.global,a=o.define;o.define=void 0;var s=require("angular2/src/router/route_config/route_config_decorator"),c=require("angular2/src/facade/lang"),u=require("angular2/src/facade/exceptions");return e.normalizeRouteConfig=r,e.assertComponentExists=i,o.define=a,t.exports}),System.register("angular2/src/router/location/location",["angular2/src/router/location/location_strategy","angular2/src/facade/async","angular2/core"],!0,function(require,e,t){function r(e,t){return e.length>0&&t.startsWith(e)?t.substring(e.length):t}function n(e){return/\/index.html$/g.test(e)?e.substring(0,e.length-11):e}function i(e){return/\/$/g.test(e)&&(e=e.substring(0,e.length-1)),e}var o=System.global,a=o.define;o.define=void 0;var s=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},c=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},u=require("angular2/src/router/location/location_strategy"),l=require("angular2/src/facade/async"),p=require("angular2/core"),f=function(){function e(e){var t=this;this.platformStrategy=e,this._subject=new l.EventEmitter;var r=this.platformStrategy.getBaseHref();this._baseHref=i(n(r)),this.platformStrategy.onPopState(function(e){l.ObservableWrapper.callEmit(t._subject,{url:t.path(),pop:!0,type:e.type})})}return e.prototype.path=function(){return this.normalize(this.platformStrategy.path())},e.prototype.normalize=function(e){return i(r(this._baseHref,n(e)))},e.prototype.prepareExternalUrl=function(e){return e.length>0&&!e.startsWith("/")&&(e="/"+e),this.platformStrategy.prepareExternalUrl(e)},e.prototype.go=function(e,t){void 0===t&&(t=""),this.platformStrategy.pushState(null,"",e,t)},e.prototype.replaceState=function(e,t){void 0===t&&(t=""),this.platformStrategy.replaceState(null,"",e,t)},e.prototype.forward=function(){this.platformStrategy.forward()},e.prototype.back=function(){this.platformStrategy.back()},e.prototype.subscribe=function(e,t,r){return void 0===t&&(t=null),void 0===r&&(r=null),l.ObservableWrapper.subscribe(this._subject,e,t,r)},e=s([p.Injectable(),c("design:paramtypes",[u.LocationStrategy])],e)}();return e.Location=f,o.define=a,t.exports}),System.register("angular2/src/router/lifecycle/route_lifecycle_reflector",["angular2/src/facade/lang","angular2/src/router/lifecycle/lifecycle_annotations_impl","angular2/src/core/reflection/reflection"],!0,function(require,e,t){function r(e,t){return t instanceof a.Type?e.name in t.prototype:!1}function n(e){for(var t=c.reflector.annotations(e),r=0;r<t.length;r+=1){var n=t[r];if(n instanceof s.CanActivate)return n.fn}return null}var i=System.global,o=i.define;i.define=void 0;var a=require("angular2/src/facade/lang"),s=require("angular2/src/router/lifecycle/lifecycle_annotations_impl"),c=require("angular2/src/core/reflection/reflection");return e.hasLifecycleHook=r,e.getCanActivateHook=n,i.define=o,t.exports}),System.register("angular2/src/router/directives/router_outlet",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/core","angular2/src/router/router","angular2/src/router/instruction","angular2/src/router/lifecycle/lifecycle_annotations","angular2/src/router/lifecycle/route_lifecycle_reflector"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},o=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},a=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},s=require("angular2/src/facade/async"),c=require("angular2/src/facade/collection"),u=require("angular2/src/facade/lang"),l=require("angular2/core"),p=require("angular2/src/router/router"),f=require("angular2/src/router/instruction"),d=require("angular2/src/router/lifecycle/lifecycle_annotations"),h=require("angular2/src/router/lifecycle/route_lifecycle_reflector"),g=s.PromiseWrapper.resolve(!0),m=function(){function e(e,t,r,n){this._elementRef=e,this._loader=t,this._parentRouter=r,this.name=null,this._componentRef=null,this._currentInstruction=null,u.isPresent(n)?(this.name=n,this._parentRouter.registerAuxOutlet(this)):this._parentRouter.registerPrimaryOutlet(this)}return e.prototype.activate=function(e){var t=this,r=this._currentInstruction;this._currentInstruction=e;var n=e.componentType,i=this._parentRouter.childRouter(n),o=l.Injector.resolve([l.provide(f.RouteData,{useValue:e.routeData}),l.provide(f.RouteParams,{useValue:new f.RouteParams(e.params)}),l.provide(p.Router,{useValue:i})]);return this._loader.loadNextToLocation(n,this._elementRef,o).then(function(i){return t._componentRef=i,h.hasLifecycleHook(d.routerOnActivate,n)?t._componentRef.instance.routerOnActivate(e,r):void 0})},e.prototype.reuse=function(e){var t=this._currentInstruction;return this._currentInstruction=e,u.isBlank(this._componentRef)?this.activate(e):s.PromiseWrapper.resolve(h.hasLifecycleHook(d.routerOnReuse,this._currentInstruction.componentType)?this._componentRef.instance.routerOnReuse(e,t):!0)},e.prototype.deactivate=function(e){var t=this,r=g;return u.isPresent(this._componentRef)&&u.isPresent(this._currentInstruction)&&h.hasLifecycleHook(d.routerOnDeactivate,this._currentInstruction.componentType)&&(r=s.PromiseWrapper.resolve(this._componentRef.instance.routerOnDeactivate(e,this._currentInstruction))),r.then(function(e){u.isPresent(t._componentRef)&&(t._componentRef.dispose(),t._componentRef=null)})},e.prototype.routerCanDeactivate=function(e){return u.isBlank(this._currentInstruction)?g:h.hasLifecycleHook(d.routerCanDeactivate,this._currentInstruction.componentType)?s.PromiseWrapper.resolve(this._componentRef.instance.routerCanDeactivate(e,this._currentInstruction)):g},e.prototype.routerCanReuse=function(e){var t;return t=u.isBlank(this._currentInstruction)||this._currentInstruction.componentType!=e.componentType?!1:h.hasLifecycleHook(d.routerCanReuse,this._currentInstruction.componentType)?this._componentRef.instance.routerCanReuse(e,this._currentInstruction):e==this._currentInstruction||u.isPresent(e.params)&&u.isPresent(this._currentInstruction.params)&&c.StringMapWrapper.equals(e.params,this._currentInstruction.params),s.PromiseWrapper.resolve(t)},e.prototype.ngOnDestroy=function(){this._parentRouter.unregisterPrimaryOutlet(this)},e=i([l.Directive({selector:"router-outlet"}),a(3,l.Attribute("name")),o("design:paramtypes",[l.ElementRef,l.DynamicComponentLoader,p.Router,String])],e)}();return e.RouterOutlet=m,r.define=n,t.exports}),System.register("angular2/src/router/location/browser_platform_location",["angular2/core","angular2/src/router/location/platform_location","angular2/src/platform/dom/dom_adapter"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},o=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},a=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},s=require("angular2/core"),c=require("angular2/src/router/location/platform_location"),u=require("angular2/src/platform/dom/dom_adapter"),l=function(e){function t(){e.call(this),this._init()}return i(t,e),t.prototype._init=function(){this._location=u.DOM.getLocation(),this._history=u.DOM.getHistory()},Object.defineProperty(t.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),t.prototype.getBaseHrefFromDOM=function(){return u.DOM.getBaseHref()},t.prototype.onPopState=function(e){u.DOM.getGlobalEventTarget("window").addEventListener("popstate",e,!1)},t.prototype.onHashChange=function(e){u.DOM.getGlobalEventTarget("window").addEventListener("hashchange",e,!1)},Object.defineProperty(t.prototype,"pathname",{get:function(){return this._location.pathname},set:function(e){this._location.pathname=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"search",{get:function(){return this._location.search},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hash",{get:function(){return this._location.hash},enumerable:!0,configurable:!0}),t.prototype.pushState=function(e,t,r){this._history.pushState(e,t,r)},t.prototype.replaceState=function(e,t,r){this._history.replaceState(e,t,r)},t.prototype.forward=function(){this._history.forward()},t.prototype.back=function(){this._history.back()},t=o([s.Injectable(),a("design:paramtypes",[])],t)}(c.PlatformLocation);return e.BrowserPlatformLocation=l,r.define=n,t.exports}),System.register("angular2/src/router/rules/rule_set",["angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/facade/collection","angular2/src/facade/async","angular2/src/router/rules/rules","angular2/src/router/route_config/route_config_impl","angular2/src/router/rules/route_handlers/async_route_handler","angular2/src/router/rules/route_handlers/sync_route_handler","angular2/src/router/rules/route_paths/param_route_path","angular2/src/router/rules/route_paths/regex_route_path"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/facade/lang"),o=require("angular2/src/facade/exceptions"),a=require("angular2/src/facade/collection"),s=require("angular2/src/facade/async"),c=require("angular2/src/router/rules/rules"),u=require("angular2/src/router/route_config/route_config_impl"),l=require("angular2/src/router/rules/route_handlers/async_route_handler"),p=require("angular2/src/router/rules/route_handlers/sync_route_handler"),f=require("angular2/src/router/rules/route_paths/param_route_path"),d=require("angular2/src/router/rules/route_paths/regex_route_path"),h=function(){function e(){this.rulesByName=new a.Map,this.auxRulesByName=new a.Map,this.auxRulesByPath=new a.Map,this.rules=[],this.defaultRule=null}return e.prototype.config=function(e){var t;if(i.isPresent(e.name)&&e.name[0].toUpperCase()!=e.name[0]){var r=e.name[0].toUpperCase()+e.name.substring(1);throw new o.BaseException('Route "'+e.path+'" with name "'+e.name+'" does not begin with an uppercase letter. Route names should be CamelCase like "'+r+'".')}if(e instanceof u.AuxRoute){t=new p.SyncRouteHandler(e.component,e.data);var n=this._getRoutePath(e),a=new c.RouteRule(n,t);return this.auxRulesByPath.set(n.toString(),a),i.isPresent(e.name)&&this.auxRulesByName.set(e.name,a),a.terminal}var s=!1;if(e instanceof u.Redirect){var f=this._getRoutePath(e),d=new c.RedirectRule(f,e.redirectTo);return this._assertNoHashCollision(d.hash,e.path),this.rules.push(d),!0}e instanceof u.Route?(t=new p.SyncRouteHandler(e.component,e.data),s=i.isPresent(e.useAsDefault)&&e.useAsDefault):e instanceof u.AsyncRoute&&(t=new l.AsyncRouteHandler(e.loader,e.data),s=i.isPresent(e.useAsDefault)&&e.useAsDefault);var h=this._getRoutePath(e),g=new c.RouteRule(h,t);if(this._assertNoHashCollision(g.hash,e.path),s){if(i.isPresent(this.defaultRule))throw new o.BaseException("Only one route can be default");this.defaultRule=g}return this.rules.push(g),i.isPresent(e.name)&&this.rulesByName.set(e.name,g),g.terminal},e.prototype.recognize=function(e){var t=[];return this.rules.forEach(function(r){var n=r.recognize(e);i.isPresent(n)&&t.push(n)}),0==t.length&&i.isPresent(e)&&e.auxiliary.length>0?[s.PromiseWrapper.resolve(new c.PathMatch(null,null,e.auxiliary))]:t},e.prototype.recognizeAuxiliary=function(e){var t=this.auxRulesByPath.get(e.path);return i.isPresent(t)?[t.recognize(e)]:[s.PromiseWrapper.resolve(null)]},e.prototype.hasRoute=function(e){return this.rulesByName.has(e)},e.prototype.componentLoaded=function(e){return this.hasRoute(e)&&i.isPresent(this.rulesByName.get(e).handler.componentType)},e.prototype.loadComponent=function(e){return this.rulesByName.get(e).handler.resolveComponentType()},e.prototype.generate=function(e,t){var r=this.rulesByName.get(e);return i.isBlank(r)?null:r.generate(t)},e.prototype.generateAuxiliary=function(e,t){var r=this.auxRulesByName.get(e);return i.isBlank(r)?null:r.generate(t)},e.prototype._assertNoHashCollision=function(e,t){this.rules.forEach(function(r){if(e==r.hash)throw new o.BaseException("Configuration '"+t+"' conflicts with existing route '"+r.path+"'")})},e.prototype._getRoutePath=function(e){if(i.isPresent(e.regex)){if(i.isFunction(e.serializer))return new d.RegexRoutePath(e.regex,e.serializer);throw new o.BaseException("Route provides a regex property, '"+e.regex+"', but no serializer property")}if(i.isPresent(e.path)){var t=e instanceof u.AuxRoute&&e.path.startsWith("/")?e.path.substring(1):e.path;return new f.ParamRoutePath(t)}throw new o.BaseException("Route must provide either a path or regex property")},e}();return e.RuleSet=h,r.define=n,t.exports}),System.register("angular2/src/router/router_providers",["angular2/src/router/router_providers_common","angular2/core","angular2/src/facade/lang","angular2/src/router/location/browser_platform_location","angular2/src/router/location/platform_location"],!0,function(require,e,t){var r=System.global,n=r.define;r.define=void 0;var i=require("angular2/src/router/router_providers_common"),o=require("angular2/core"),a=require("angular2/src/facade/lang"),s=require("angular2/src/router/location/browser_platform_location"),c=require("angular2/src/router/location/platform_location");return e.ROUTER_PROVIDERS=a.CONST_EXPR([i.ROUTER_PROVIDERS_COMMON,a.CONST_EXPR(new o.Provider(c.PlatformLocation,{useClass:s.BrowserPlatformLocation}))]),e.ROUTER_BINDINGS=e.ROUTER_PROVIDERS,r.define=n,t.exports}),System.register("angular2/src/router/route_registry",["angular2/src/facade/collection","angular2/src/facade/async","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/src/core/reflection/reflection","angular2/core","angular2/src/router/route_config/route_config_impl","angular2/src/router/rules/rules","angular2/src/router/rules/rule_set","angular2/src/router/instruction","angular2/src/router/route_config/route_config_normalizer","angular2/src/router/url_parser"],!0,function(require,e,t){function r(e){var t=[];return e.forEach(function(e){if(d.isString(e)){var r=e;t=t.concat(r.split("/"))}else t.push(e)}),t}function n(e){if(e=e.filter(function(e){return d.isPresent(e)}),0==e.length)return null;if(1==e.length)return e[0];var t=e[0],r=e.slice(1);return r.reduce(function(e,t){return-1==i(t.specificity,e.specificity)?t:e},t)}function i(e,t){for(var r=d.Math.min(e.length,t.length),n=0;r>n;n+=1){var i=d.StringWrapper.charCodeAt(e,n),o=d.StringWrapper.charCodeAt(t,n),a=o-i;if(0!=a)return a}return e.length-t.length}function o(e,t){if(d.isType(e)){var r=g.reflector.annotations(e);if(d.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof y.RouteConfig)throw new h.BaseException('Child routes are not allowed for "'+t+'". Use "..." on the parent\'s route path.')}}}var a=System.global,s=a.define;a.define=void 0;var c=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},u=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},l=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},p=require("angular2/src/facade/collection"),f=require("angular2/src/facade/async"),d=require("angular2/src/facade/lang"),h=require("angular2/src/facade/exceptions"),g=require("angular2/src/core/reflection/reflection"),m=require("angular2/core"),y=require("angular2/src/router/route_config/route_config_impl"),v=require("angular2/src/router/rules/rules"),_=require("angular2/src/router/rules/rule_set"),b=require("angular2/src/router/instruction"),P=require("angular2/src/router/route_config/route_config_normalizer"),w=require("angular2/src/router/url_parser"),C=f.PromiseWrapper.resolve(null);e.ROUTER_PRIMARY_COMPONENT=d.CONST_EXPR(new m.OpaqueToken("RouterPrimaryComponent"));var R=function(){function t(e){this._rootComponent=e,this._rules=new p.Map}return t.prototype.config=function(e,t){t=P.normalizeRouteConfig(t,this),t instanceof y.Route?P.assertComponentExists(t.component,t.path):t instanceof y.AuxRoute&&P.assertComponentExists(t.component,t.path);var r=this._rules.get(e);d.isBlank(r)&&(r=new _.RuleSet,this._rules.set(e,r));var n=r.config(t);t instanceof y.Route&&(n?o(t.component,t.path):this.configFromComponent(t.component))},t.prototype.configFromComponent=function(e){var t=this;if(d.isType(e)&&!this._rules.has(e)){var r=g.reflector.annotations(e);if(d.isPresent(r))for(var n=0;n<r.length;n++){var i=r[n];if(i instanceof y.RouteConfig){var o=i.configs;o.forEach(function(r){return t.config(e,r)})}}}},t.prototype.recognize=function(e,t){var r=w.parser.parse(e);return this._recognize(r,[])},t.prototype._recognize=function(e,t,r){var i=this;void 0===r&&(r=!1);var o=p.ListWrapper.last(t),a=d.isPresent(o)?o.component.componentType:this._rootComponent,s=this._rules.get(a);if(d.isBlank(s))return C;var c=r?s.recognizeAuxiliary(e):s.recognize(e),u=c.map(function(e){return e.then(function(e){if(e instanceof v.PathMatch){var r=t.length>0?[p.ListWrapper.last(t)]:[],n=i._auxRoutesToUnresolved(e.remainingAux,r),o=new b.ResolvedInstruction(e.instruction,null,n);if(d.isBlank(e.instruction)||e.instruction.terminal)return o;var a=t.concat([o]);return i._recognize(e.remaining,a).then(function(e){return d.isBlank(e)?null:e instanceof b.RedirectInstruction?e:(o.child=e,o)})}if(e instanceof v.RedirectMatch){var o=i.generate(e.redirectTo,t.concat([null]));return new b.RedirectInstruction(o.component,o.child,o.auxInstruction,e.specificity)}})});return!d.isBlank(e)&&""!=e.path||0!=c.length?f.PromiseWrapper.all(u).then(n):f.PromiseWrapper.resolve(this.generateDefault(a))},t.prototype._auxRoutesToUnresolved=function(e,t){var r=this,n={};return e.forEach(function(e){n[e.path]=new b.UnresolvedInstruction(function(){return r._recognize(e,t,!0)})}),n},t.prototype.generate=function(e,t,n){void 0===n&&(n=!1);var i,o=r(e);if(""==p.ListWrapper.first(o))o.shift(),i=p.ListWrapper.first(t),t=[];else if(i=t.length>0?t.pop():null,"."==p.ListWrapper.first(o))o.shift();else if(".."==p.ListWrapper.first(o))for(;".."==p.ListWrapper.first(o);){if(t.length<=0)throw new h.BaseException('Link "'+p.ListWrapper.toJSON(e)+'" has too many "../" segments.');i=t.pop(),o=p.ListWrapper.slice(o,1)}else{var a=p.ListWrapper.first(o),s=this._rootComponent,c=null;if(t.length>1){var u=t[t.length-1],l=t[t.length-2];s=u.component.componentType,c=l.component.componentType}else 1==t.length&&(s=t[0].component.componentType,c=this._rootComponent);var f=this.hasRoute(a,s),g=d.isPresent(c)&&this.hasRoute(a,c);if(g&&f){var m='Link "'+p.ListWrapper.toJSON(e)+'" is ambiguous, use "./" or "../" to disambiguate.';throw new h.BaseException(m)}g&&(i=t.pop())}if(""==o[o.length-1]&&o.pop(),o.length>0&&""==o[0]&&o.shift(),o.length<1){var m='Link "'+p.ListWrapper.toJSON(e)+'" must include a route name.';throw new h.BaseException(m)}for(var y=this._generate(o,t,i,n,e),v=t.length-1;v>=0;v--){var _=t[v];if(d.isBlank(_))break;y=_.replaceChild(y)}return y},t.prototype._generate=function(e,t,r,n,i){var o=this;void 0===n&&(n=!1);var a=this._rootComponent,s=null,c={},u=p.ListWrapper.last(t);if(d.isPresent(u)&&d.isPresent(u.component)&&(a=u.component.componentType),0==e.length){var l=this.generateDefault(a);if(d.isBlank(l))throw new h.BaseException('Link "'+p.ListWrapper.toJSON(i)+'" does not resolve to a terminal instruction.');return l}d.isPresent(r)&&!n&&(c=p.StringMapWrapper.merge(r.auxInstruction,c),s=r.component);var f=this._rules.get(a);if(d.isBlank(f))throw new h.BaseException('Component "'+d.getTypeNameForDebugging(a)+'" has no route config.');var g=0,m={};if(g<e.length&&d.isString(e[g])){var y=e[g];if(""==y||"."==y||".."==y)throw new h.BaseException('"'+y+'/" is only allowed at the beginning of a link DSL.');if(g+=1,g<e.length){var v=e[g];d.isStringMap(v)&&!d.isArray(v)&&(m=v,g+=1)}var _=(n?f.auxRulesByName:f.rulesByName).get(y);if(d.isBlank(_))throw new h.BaseException('Component "'+d.getTypeNameForDebugging(a)+'" has no route named "'+y+'".');if(d.isBlank(_.handler.componentType)){var P=_.generateComponentPathValues(m);return new b.UnresolvedInstruction(function(){return _.handler.resolveComponentType().then(function(a){return o._generate(e,t,r,n,i)})},P.urlPath,w.convertUrlParamsToArray(P.urlParams))}s=n?f.generateAuxiliary(y,m):f.generate(y,m)}for(;g<e.length&&d.isArray(e[g]);){var C=[u],R=this._generate(e[g],C,null,!0,i);c[R.component.urlPath]=R,g+=1}var S=new b.ResolvedInstruction(s,null,c);if(d.isPresent(s)&&d.isPresent(s.componentType)){var E=null;if(s.terminal)g>=e.length;else{var x=t.concat([S]),O=e.slice(g);E=this._generate(O,x,null,!1,i)}S.child=E}return S},t.prototype.hasRoute=function(e,t){var r=this._rules.get(t);return d.isBlank(r)?!1:r.hasRoute(e)},t.prototype.generateDefault=function(e){var t=this;if(d.isBlank(e))return null;var r=this._rules.get(e);if(d.isBlank(r)||d.isBlank(r.defaultRule))return null;var n=null;if(d.isPresent(r.defaultRule.handler.componentType)){var i=r.defaultRule.generate({});return r.defaultRule.terminal||(n=this.generateDefault(r.defaultRule.handler.componentType)),new b.DefaultInstruction(i,n)}return new b.UnresolvedInstruction(function(){return r.defaultRule.handler.resolveComponentType().then(function(r){return t.generateDefault(e)})})},t=c([m.Injectable(),l(0,m.Inject(e.ROUTER_PRIMARY_COMPONENT)),u("design:paramtypes",[d.Type])],t);
}();return e.RouteRegistry=R,a.define=s,t.exports}),System.register("angular2/src/router/router",["angular2/src/facade/async","angular2/src/facade/collection","angular2/src/facade/lang","angular2/src/facade/exceptions","angular2/core","angular2/src/router/route_registry","angular2/src/router/location/location","angular2/src/router/lifecycle/route_lifecycle_reflector"],!0,function(require,e,t){function r(e,t){var n=y;return p.isBlank(e.component)?n:(p.isPresent(e.child)&&(n=r(e.child,p.isPresent(t)?t.child:null)),n.then(function(r){if(0==r)return!1;if(e.component.reuse)return!0;var n=m.getCanActivateHook(e.component.componentType);return p.isPresent(n)?n(e.component,p.isPresent(t)?t.component:null):!0}))}var n=System.global,i=n.define;n.define=void 0;var o=this&&this.__extends||function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)},a=this&&this.__decorate||function(e,t,r,n){var i,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(3>o?i(a):o>3?i(t,r,a):i(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a},s=this&&this.__metadata||function(e,t){return"object"==typeof Reflect&&"function"==typeof Reflect.metadata?Reflect.metadata(e,t):void 0},c=this&&this.__param||function(e,t){return function(r,n){t(r,n,e)}},u=require("angular2/src/facade/async"),l=require("angular2/src/facade/collection"),p=require("angular2/src/facade/lang"),f=require("angular2/src/facade/exceptions"),d=require("angular2/core"),h=require("angular2/src/router/route_registry"),g=require("angular2/src/router/location/location"),m=require("angular2/src/router/lifecycle/route_lifecycle_reflector"),y=u.PromiseWrapper.resolve(!0),v=u.PromiseWrapper.resolve(!1),_=function(){function e(e,t,r,n){this.registry=e,this.parent=t,this.hostComponent=r,this.root=n,this.navigating=!1,this.currentInstruction=null,this._currentNavigation=y,this._outlet=null,this._auxRouters=new l.Map,this._subject=new u.EventEmitter}return e.prototype.childRouter=function(e){return this._childRouter=new P(this,e)},e.prototype.auxRouter=function(e){return new P(this,e)},e.prototype.registerPrimaryOutlet=function(e){if(p.isPresent(e.name))throw new f.BaseException("registerPrimaryOutlet expects to be called with an unnamed outlet.");if(p.isPresent(this._outlet))throw new f.BaseException("Primary outlet is already registered.");return this._outlet=e,p.isPresent(this.currentInstruction)?this.commit(this.currentInstruction,!1):y},e.prototype.unregisterPrimaryOutlet=function(e){if(p.isPresent(e.name))throw new f.BaseException("registerPrimaryOutlet expects to be called with an unnamed outlet.");this._outlet=null},e.prototype.registerAuxOutlet=function(e){var t=e.name;if(p.isBlank(t))throw new f.BaseException("registerAuxOutlet expects to be called with an outlet with a name.");var r=this.auxRouter(this.hostComponent);this._auxRouters.set(t,r),r._outlet=e;var n;return p.isPresent(this.currentInstruction)&&p.isPresent(n=this.currentInstruction.auxInstruction[t])?r.commit(n):y},e.prototype.isRouteActive=function(e){for(var t=this;p.isPresent(t.parent)&&p.isPresent(e.child);)t=t.parent,e=e.child;return p.isPresent(this.currentInstruction)&&this.currentInstruction.component==e.component},e.prototype.config=function(e){var t=this;return e.forEach(function(e){t.registry.config(t.hostComponent,e)}),this.renavigate()},e.prototype.navigate=function(e){var t=this.generate(e);return this.navigateByInstruction(t,!1)},e.prototype.navigateByUrl=function(e,t){var r=this;return void 0===t&&(t=!1),this._currentNavigation=this._currentNavigation.then(function(n){return r.lastNavigationAttempt=e,r._startNavigating(),r._afterPromiseFinishNavigating(r.recognize(e).then(function(e){return p.isBlank(e)?!1:r._navigate(e,t)}))})},e.prototype.navigateByInstruction=function(e,t){var r=this;return void 0===t&&(t=!1),p.isBlank(e)?v:this._currentNavigation=this._currentNavigation.then(function(n){return r._startNavigating(),r._afterPromiseFinishNavigating(r._navigate(e,t))})},e.prototype._settleInstruction=function(e){var t=this;return e.resolveComponent().then(function(r){var n=[];return p.isPresent(e.component)&&(e.component.reuse=!1),p.isPresent(e.child)&&n.push(t._settleInstruction(e.child)),l.StringMapWrapper.forEach(e.auxInstruction,function(e,r){n.push(t._settleInstruction(e))}),u.PromiseWrapper.all(n)})},e.prototype._navigate=function(e,t){var r=this;return this._settleInstruction(e).then(function(t){return r._routerCanReuse(e)}).then(function(t){return r._canActivate(e)}).then(function(n){return n?r._routerCanDeactivate(e).then(function(n){return n?r.commit(e,t).then(function(t){return r._emitNavigationFinish(e.toRootUrl()),!0}):void 0}):!1})},e.prototype._emitNavigationFinish=function(e){u.ObservableWrapper.callEmit(this._subject,e)},e.prototype._afterPromiseFinishNavigating=function(e){var t=this;return u.PromiseWrapper.catchError(e.then(function(e){return t._finishNavigating()}),function(e){throw t._finishNavigating(),e})},e.prototype._routerCanReuse=function(e){var t=this;return p.isBlank(this._outlet)?v:p.isBlank(e.component)?y:this._outlet.routerCanReuse(e.component).then(function(r){return e.component.reuse=r,r&&p.isPresent(t._childRouter)&&p.isPresent(e.child)?t._childRouter._routerCanReuse(e.child):void 0})},e.prototype._canActivate=function(e){return r(e,this.currentInstruction)},e.prototype._routerCanDeactivate=function(e){var t=this;if(p.isBlank(this._outlet))return y;var r,n=null,i=!1,o=null;return p.isPresent(e)&&(n=e.child,o=e.component,i=p.isBlank(e.component)||e.component.reuse),r=i?y:this._outlet.routerCanDeactivate(o),r.then(function(e){return 0==e?!1:p.isPresent(t._childRouter)?t._childRouter._routerCanDeactivate(n):!0})},e.prototype.commit=function(e,t){var r=this;void 0===t&&(t=!1),this.currentInstruction=e;var n=y;if(p.isPresent(this._outlet)&&p.isPresent(e.component)){var i=e.component;n=i.reuse?this._outlet.reuse(i):this.deactivate(e).then(function(e){return r._outlet.activate(i)}),p.isPresent(e.child)&&(n=n.then(function(t){return p.isPresent(r._childRouter)?r._childRouter.commit(e.child):void 0}))}var o=[];return this._auxRouters.forEach(function(t,r){p.isPresent(e.auxInstruction[r])&&o.push(t.commit(e.auxInstruction[r]))}),n.then(function(e){return u.PromiseWrapper.all(o)})},e.prototype._startNavigating=function(){this.navigating=!0},e.prototype._finishNavigating=function(){this.navigating=!1},e.prototype.subscribe=function(e){return u.ObservableWrapper.subscribe(this._subject,e)},e.prototype.deactivate=function(e){var t=this,r=null,n=null;p.isPresent(e)&&(r=e.child,n=e.component);var i=y;return p.isPresent(this._childRouter)&&(i=this._childRouter.deactivate(r)),p.isPresent(this._outlet)&&(i=i.then(function(e){return t._outlet.deactivate(n)})),i},e.prototype.recognize=function(e){var t=this._getAncestorInstructions();return this.registry.recognize(e,t)},e.prototype._getAncestorInstructions=function(){for(var e=[this.currentInstruction],t=this;p.isPresent(t=t.parent);)e.unshift(t.currentInstruction);return e},e.prototype.renavigate=function(){return p.isBlank(this.lastNavigationAttempt)?this._currentNavigation:this.navigateByUrl(this.lastNavigationAttempt)},e.prototype.generate=function(e){var t=this._getAncestorInstructions();return this.registry.generate(e,t)},e=a([d.Injectable(),s("design:paramtypes",[h.RouteRegistry,e,Object,e])],e)}();e.Router=_;var b=function(e){function t(t,r,n){var i=this;e.call(this,t,null,n),this.root=this,this._location=r,this._locationSub=this._location.subscribe(function(e){i.recognize(e.url).then(function(t){i.navigateByInstruction(t,p.isPresent(e.pop)).then(function(r){if(!p.isPresent(e.pop)||"hashchange"==e.type){var n=t.toUrlPath(),o=t.toUrlQuery();n.length>0&&"/"!=n[0]&&(n="/"+n),"hashchange"==e.type?t.toRootUrl()!=i._location.path()&&i._location.replaceState(n,o):i._location.go(n,o)}})})}),this.registry.configFromComponent(n),this.navigateByUrl(r.path())}return o(t,e),t.prototype.commit=function(t,r){var n=this;void 0===r&&(r=!1);var i=t.toUrlPath(),o=t.toUrlQuery();i.length>0&&"/"!=i[0]&&(i="/"+i);var a=e.prototype.commit.call(this,t);return r||(a=a.then(function(e){n._location.go(i,o)})),a},t.prototype.dispose=function(){p.isPresent(this._locationSub)&&(u.ObservableWrapper.dispose(this._locationSub),this._locationSub=null)},t=a([d.Injectable(),c(2,d.Inject(h.ROUTER_PRIMARY_COMPONENT)),s("design:paramtypes",[h.RouteRegistry,g.Location,p.Type])],t)}(_);e.RootRouter=b;var P=function(e){function t(t,r){e.call(this,t.registry,t,r,t.root),this.parent=t}return o(t,e),t.prototype.navigateByUrl=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByUrl(e,t)},t.prototype.navigateByInstruction=function(e,t){return void 0===t&&(t=!1),this.parent.navigateByInstruction(e,t)},t}(_);return n.define=i,t.exports}),System.register("angular2/router",["angular2/src/router/router","angular2/src/router/directives/router_outlet","angular2/src/router/directives/router_link","angular2/src/router/instruction","angular2/src/router/location/platform_location","angular2/src/router/route_registry","angular2/src/router/location/location_strategy","angular2/src/router/location/hash_location_strategy","angular2/src/router/location/path_location_strategy","angular2/src/router/location/location","angular2/src/router/route_config/route_config_decorator","angular2/src/router/route_definition","angular2/src/router/lifecycle/lifecycle_annotations","angular2/src/router/instruction","angular2/core","angular2/src/router/router_providers_common","angular2/src/router/router_providers","angular2/src/router/directives/router_outlet","angular2/src/router/directives/router_link","angular2/src/facade/lang"],!0,function(require,e,t){function r(t){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}var n=System.global,i=n.define;n.define=void 0;var o=require("angular2/src/router/router");e.Router=o.Router;var a=require("angular2/src/router/directives/router_outlet");e.RouterOutlet=a.RouterOutlet;var s=require("angular2/src/router/directives/router_link");e.RouterLink=s.RouterLink;var c=require("angular2/src/router/instruction");e.RouteParams=c.RouteParams,e.RouteData=c.RouteData;var u=require("angular2/src/router/location/platform_location");e.PlatformLocation=u.PlatformLocation;var l=require("angular2/src/router/route_registry");e.RouteRegistry=l.RouteRegistry,e.ROUTER_PRIMARY_COMPONENT=l.ROUTER_PRIMARY_COMPONENT;var p=require("angular2/src/router/location/location_strategy");e.LocationStrategy=p.LocationStrategy,e.APP_BASE_HREF=p.APP_BASE_HREF;var f=require("angular2/src/router/location/hash_location_strategy");e.HashLocationStrategy=f.HashLocationStrategy;var d=require("angular2/src/router/location/path_location_strategy");e.PathLocationStrategy=d.PathLocationStrategy;var h=require("angular2/src/router/location/location");e.Location=h.Location,r(require("angular2/src/router/route_config/route_config_decorator")),r(require("angular2/src/router/route_definition"));var g=require("angular2/src/router/lifecycle/lifecycle_annotations");e.CanActivate=g.CanActivate;var m=require("angular2/src/router/instruction");e.Instruction=m.Instruction,e.ComponentInstruction=m.ComponentInstruction;var y=require("angular2/core");e.OpaqueToken=y.OpaqueToken;var v=require("angular2/src/router/router_providers_common");e.ROUTER_PROVIDERS_COMMON=v.ROUTER_PROVIDERS_COMMON;var _=require("angular2/src/router/router_providers");e.ROUTER_PROVIDERS=_.ROUTER_PROVIDERS,e.ROUTER_BINDINGS=_.ROUTER_BINDINGS;var b=require("angular2/src/router/directives/router_outlet"),P=require("angular2/src/router/directives/router_link"),w=require("angular2/src/facade/lang");return e.ROUTER_DIRECTIVES=w.CONST_EXPR([b.RouterOutlet,P.RouterLink]),n.define=i,t.exports});
//# sourceMappingURL=router.min.js.map